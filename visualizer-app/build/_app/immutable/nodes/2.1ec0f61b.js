import{s as st,n as W,r as at,o as N,a as ct,f as ut,b as ft}from"../chunks/scheduler.b108d059.js";import{S as _t,i as lt,g as v,s as G,h as C,j as z,f as I,c as J,y as K,k as D,a as bt,x as m,z as Q}from"../chunks/index.2744cf09.js";let b;const l=new Array(128).fill(void 0);l.push(void 0,null,!0,!1);let M=l.length;function a(e){M===l.length&&l.push(l.length+1);const t=M;return M=l[t],l[t]=e,t}function i(e){return l[e]}function gt(e){e<132||(l[e]=M,M=e)}function k(e){const t=i(e);return gt(e),t}const Z=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&Z.decode();let S=null;function wt(){return(S===null||S.byteLength===0)&&(S=new Uint8Array(b.memory.buffer)),S}function j(e,t){return e=e>>>0,Z.decode(wt().subarray(e,e+t))}function X(e){const t=b.start_sim(e);return k(t)}function dt(){const e=b.step_sim();return k(e)}function _(e,t){try{return e.apply(this,t)}catch(n){b.__wbindgen_exn_store(a(n))}}async function ht(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(o){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",o);else throw o}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}else{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}function mt(){const e={};return e.wbg={},e.wbg.__wbindgen_number_new=function(t){return a(t)},e.wbg.__wbindgen_object_drop_ref=function(t){k(t)},e.wbg.__wbg_alert_99b3657bd8d82407=function(t,n){alert(j(t,n))},e.wbg.__wbg_randomFillSync_a0d98aa11c81fe89=function(){return _(function(t,n){i(t).randomFillSync(k(n))},arguments)},e.wbg.__wbg_getRandomValues_504510b5564925af=function(){return _(function(t,n){i(t).getRandomValues(i(n))},arguments)},e.wbg.__wbg_crypto_58f13aa23ffcb166=function(t){const n=i(t).crypto;return a(n)},e.wbg.__wbindgen_is_object=function(t){const n=i(t);return typeof n=="object"&&n!==null},e.wbg.__wbg_process_5b786e71d465a513=function(t){const n=i(t).process;return a(n)},e.wbg.__wbg_versions_c2ab80650590b6a2=function(t){const n=i(t).versions;return a(n)},e.wbg.__wbg_node_523d7bd03ef69fba=function(t){const n=i(t).node;return a(n)},e.wbg.__wbindgen_is_string=function(t){return typeof i(t)=="string"},e.wbg.__wbg_require_2784e593a4674877=function(){return _(function(){const t=module.require;return a(t)},arguments)},e.wbg.__wbindgen_string_new=function(t,n){const o=j(t,n);return a(o)},e.wbg.__wbg_msCrypto_abcb1295e768d1f2=function(t){const n=i(t).msCrypto;return a(n)},e.wbg.__wbg_new_08236689f0afb357=function(){const t=new Array;return a(t)},e.wbg.__wbindgen_is_function=function(t){return typeof i(t)=="function"},e.wbg.__wbg_newnoargs_ccdcae30fd002262=function(t,n){const o=new Function(j(t,n));return a(o)},e.wbg.__wbg_call_669127b9d730c650=function(){return _(function(t,n){const o=i(t).call(i(n));return a(o)},arguments)},e.wbg.__wbg_self_3fad056edded10bd=function(){return _(function(){const t=self.self;return a(t)},arguments)},e.wbg.__wbg_window_a4f46c98a61d4089=function(){return _(function(){const t=window.window;return a(t)},arguments)},e.wbg.__wbg_globalThis_17eff828815f7d84=function(){return _(function(){const t=globalThis.globalThis;return a(t)},arguments)},e.wbg.__wbg_global_46f939f6541643c5=function(){return _(function(){const t=global.global;return a(t)},arguments)},e.wbg.__wbindgen_is_undefined=function(t){return i(t)===void 0},e.wbg.__wbg_of_5b11b7255a230e4e=function(t,n,o){const r=Array.of(i(t),i(n),i(o));return a(r)},e.wbg.__wbg_push_fd3233d09cf81821=function(t,n){return i(t).push(i(n))},e.wbg.__wbg_call_53fc3abd42e24ec8=function(){return _(function(t,n,o){const r=i(t).call(i(n),i(o));return a(r)},arguments)},e.wbg.__wbg_buffer_344d9b41efe96da7=function(t){const n=i(t).buffer;return a(n)},e.wbg.__wbg_newwithbyteoffsetandlength_2dc04d99088b15e3=function(t,n,o){const r=new Uint8Array(i(t),n>>>0,o>>>0);return a(r)},e.wbg.__wbg_new_d8a000788389a31e=function(t){const n=new Uint8Array(i(t));return a(n)},e.wbg.__wbg_set_dcfd613a3420f908=function(t,n,o){i(t).set(i(n),o>>>0)},e.wbg.__wbg_newwithlength_13b5319ab422dcf6=function(t){const n=new Uint8Array(t>>>0);return a(n)},e.wbg.__wbg_subarray_6ca5cfa7fbb9abbe=function(t,n,o){const r=i(t).subarray(n>>>0,o>>>0);return a(r)},e.wbg.__wbindgen_object_clone_ref=function(t){const n=i(t);return a(n)},e.wbg.__wbindgen_throw=function(t,n){throw new Error(j(t,n))},e.wbg.__wbindgen_memory=function(){const t=b.memory;return a(t)},e}function yt(e,t){return b=e.exports,$.__wbindgen_wasm_module=t,S=null,b}async function $(e){if(b!==void 0)return b;typeof e>"u"&&(e=new URL(""+new URL("../assets/droneviz_bg.5bb11028.wasm",import.meta.url).href,self.location));const t=mt();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:o}=await ht(await e,t);return yt(n,o)}function pt(e){let t,n,o,r,c,y="Reset",u,f,A="Start",p,T;return{c(){t=v("div"),n=v("canvas"),o=G(),r=v("bar"),c=v("button"),c.textContent=y,u=G(),f=v("button"),f.textContent=A,this.h()},l(g){t=C(g,"DIV",{class:!0});var w=z(t);n=C(w,"CANVAS",{class:!0}),z(n).forEach(I),o=J(w),r=C(w,"BAR",{class:!0});var s=z(r);c=C(s,"BUTTON",{"data-svelte-h":!0}),K(c)!=="svelte-gtisqx"&&(c.textContent=y),u=J(s),f=C(s,"BUTTON",{"data-svelte-h":!0}),K(f)!=="svelte-io9yjy"&&(f.textContent=A),s.forEach(I),w.forEach(I),this.h()},h(){D(n,"class","svelte-83uv01"),D(r,"class","svelte-83uv01"),D(t,"class","canvas-container svelte-83uv01")},m(g,w){bt(g,t,w),m(t,n),e[3](n),m(t,o),m(t,r),m(r,c),m(r,u),m(r,f),p||(T=[Q(c,"click",e[1]),Q(f,"click",e[2])],p=!0)},p:W,i:W,o:W,d(g){g&&I(t),e[3](null),p=!1,at(T)}}}let Y=100;function E(e,t,n,o){let r=e+n*Math.cos(o),c=t+n*Math.sin(o);return[r,c]}function vt(e,t,n){let o=!1,r,c,y,u;const f=()=>{n(0,r.width=window.innerWidth*.9,r),n(0,r.height=window.innerHeight*1-y-19.2,r),r.height/2,r.height/20};N(async()=>{await $(),u=X(Y),console.log(u)}),ct(()=>{f(),g()}),ut(()=>{});function A(s,d){for(const[rt,ot,it]of u){let h=Math.min(d.height,d.width)/90,B=h,R=B+rt*(d.width-2*h),U=B+ot*(d.height-2*h),O=it+Math.PI/2;s.beginPath(),s.arc(R,U,h,0,2*Math.PI),s.fillStyle="red",s.stroke();let L=E(R,U,h,O-150*Math.PI/180-Math.PI/2),V=E(R,U,h,O-Math.PI/2),H=E(R,U,h,O+150*Math.PI/180-Math.PI/2);s.beginPath(),s.moveTo(L[0],L[1]),s.lineTo(V[0],V[1]),s.lineTo(H[0],H[1]),s.closePath(),s.fillStyle="blue",s.fill()}const[q,x,tt]=u.at(-1);console.log(q,x,tt);let P=Math.min(d.height,d.width)/90,F=P,et=F+q*(d.width-2*P),nt=F+x*(d.height-2*P);s.beginPath(),s.arc(et,nt,P,0,2*Math.PI),s.fillStyle="green",s.fill()}function p(){o=!1,u=X(Y)}function T(){o=!0}function g(){o&&(u=dt()),!(typeof document>"u")&&(c=r==null?void 0:r.getContext("2d"),c||(n(0,r=document.createElement("canvas")),c=r.getContext("2d"),document.querySelector(".canvas-container").appendChild(r)),c.clearRect(0,0,r.width,r.height),A(c,r))}setInterval(()=>{g()},10),N(()=>{const s=getComputedStyle(document.body);y=parseFloat(s.marginTop)+parseFloat(s.marginBottom)});function w(s){ft[s?"unshift":"push"](()=>{r=s,n(0,r)})}return[r,p,T,w]}class Tt extends _t{constructor(t){super(),lt(this,t,vt,pt,st,{})}}export{Tt as component};
